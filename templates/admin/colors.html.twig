{% extends 'base.html.twig' %}

{% block title %}Filument Foundry: Admin{% endblock %}

{% block body %}
    <div class="flex-1 flex flex-col bg-[#f5ede5]">
        <main class="p-6 space-y-6">
            <!-- Header -->
            <div class="flex justify-between items-center">
                <!-- Left side: Title + Subtitle -->
                <div class="space-y-1">
                    <h1 class="text-3xl font-extrabold text-gray-900">Color Management</h1>
                    <p class="text-gray-600 text-base">Manage available colors</p>
                </div>

                <!-- Right side: Button -->
                <button id="button_modal_addColors"
                        style="background-color: #1E1E18;"
                        class="text-white px-4 py-2 rounded-lg flex items-center hover:bg-gray-800 transition gap-2">
                    <img src="{{ asset('images/admin/Plus.svg') }}" alt="Add Icon" class="w-4 h-4">
                    Add Finish
                </button>
            </div>

            <!-- Search -->
            <div class="flex items-center justify-between gap-4 mt-4 w-full">
                <input type="text" placeholder="Search colors..."
                    class="flex-1 py-2 px-2 text-base rounded-lg border border-gray-300 focus:ring-2 focus:ring-orange-400 focus:outline-none text-gray-800 font-medium shadow-sm">

                <button style="background-color: #1E1E18;"
                    class="text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-gray-800 transition">
                    <img src="{{ asset('images/admin/search.svg') }}" alt="Search Icon" class="w-4 h-4">
                    Search
                </button>
            </div>

            <!-- COLORS GRID -->
            <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-4 gap-6 mt-6">
                {# Loop #}
                {% for color in colors %}
                <div class="bg-white rounded-2xl shadow overflow-hidden flex flex-col">
                    <div class="relative h-48 w-full">
                        <!-- Badge -->
                        {% if color.availability %}
                            <span class="absolute top-4 right-4 bg-[rgb(251,165,3)] text-black text-sm font-semibold px-2 py-1 rounded-md shadow-md">Available</span>
                        {% else %}
                            <span class="absolute top-4 right-4 bg-gray-400 text-white text-sm font-semibold px-2 py-1 rounded-md shadow-md">Unavailable</span>
                        {% endif %}

                        <!-- Image -->
                        {% if color.imagePath %}
                        <img
                            src="{{ asset(color.imagePath) }}"
                            alt="{{ color.name }}"
                            class="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
                        >
                        {% elseif color.getColorHex() %}
                        <div
                            class="w-full h-full transition-all duration-300 hover:brightness-95 rounded-lg"
                            style="background-color: {{ color.getColorHex() }};"
                            title="{{ color.name }}"
                        ></div>
                        {% else %}
                        <img
                            src="{{ asset('uploads/placeholder.jpeg') }}"
                            alt="No image"
                            class="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
                        >
                        {% endif %}
                    </div>
                    <!-- Card Body -->
                    <div class="p-4 flex flex-col flex-1">
                        <div class="flex flex-col space-y-3">
                            <div class="space-y-6">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <h3 class="text-lg font-semibold">{{ color.name }}</h3>
                                    </div>
                                    <div>
                                        <p class="text-sky-600 font-bold text-lg mt-1">â‚±{{ color.price|number_format(2, '.', ',') }}</p>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Footer Controls -->
                        <div class="flex gap-2 pt-6 justify-end">
                            <!-- EDIT COLOR BUTTON -->
                            <button
                                type="button"
                                class="editColorBtn border border-gray-400 px-2 py-2 rounded-xl font-medium flex items-center gap-2 text-black
                                    bg-[#f5ede5] hover:bg-[rgb(251,165,3)] transition-colors"
                                data-color-id="{{ color.id }}"
                                data-color-name="{{ color.name }}"
                                data-color-price="{{ color.price }}"
                                data-color-type="{{ color.imagePath ? 'image' : 'hex' }}"
                                data-color-value="{{ color.imagePath ? asset(color.imagePath) : color.colorHex }}"
                                data-color-available="{{ color.availability ? '1' : '0' }}"
                            >
                                <img src="{{ asset('images/admin/edit.svg') }}" alt="Edit Icon" class="w-4 h-4">
                            </button>



                            <!-- DELETE BUTTON -->
                            <button
                                type="button"
                                class="deleteColorBtn border border-gray-400 px-2 py-2 rounded-xl font-medium flex items-center gap-2 text-black
                                    bg-[#f5ede5] hover:bg-[rgb(251,165,3)] transition-colors"
                                data-delete-url="{{ path('admin_delete_color', { id: color.id }) }}"
                                data-color-name="{{ color.name }}"
                            >
                                <img src="{{ asset('images/admin/trash 2.svg') }}" alt="Trash Icon" class="w-4 h-4">
                            </button>
                        </div>
                    </div>
                </div>
                {% else %}
                    <p class="text-gray-500">No colors found.</p>
                {% endfor %}
            </div>
        </main>
    </div>
</div> <!-- NABILIN NA CLOSE FOR LEFT SIDEBAR -->
{% endblock %}