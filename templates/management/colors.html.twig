{% extends 'base.html.twig' %}

{% block title %}Filument Foundry: Admin{% endblock %}

{% block body %}
    <div class="flex-1 flex flex-col bg-[#f5ede5]">
        <main class="p-6 space-y-6">
            <!-- Header -->
            <div class="flex justify-between items-center">
                <!-- Left side: Title + Subtitle -->
                <div class="space-y-1">
                    <h1 class="text-3xl font-extrabold text-gray-900">Color Management</h1>
                    <p class="text-gray-600 text-base">Manage available colors</p>
                </div>

                <!-- Right side: Button -->
                <button id="button_modal_addColors"
                        style="background-color: #1E1E18;"
                        class="text-white px-4 py-2 rounded-lg flex items-center hover:bg-gray-800 transition gap-2">
                    <img src="{{ asset('images/admin/Plus.svg') }}" alt="Add Icon" class="w-4 h-4">
                    Add Color
                </button>
            </div>

            <!-- Search -->
            <div class="flex items-center justify-between mt-4 gap-3">
                <!-- Search Input -->
                <div class="flex items-center bg-white px-4 py-2 rounded-xl shadow w-full">
                    <img src="{{ asset('images/partials/search.svg') }}"
                        alt="Orders Icon"
                        style="width: 20px; height: 20px; margin-right: 20px;">
                    <input id="searchInput_colors" type="text" placeholder="Search finish..."
                        placeholder="Search orders..."
                        class="w-full focus:outline-none text-gray-700" />
                </div>

                {# SEARCH #}
                <div class="relative inline-block">
                    <!-- Status Filter -->
                    <select 
                        id="availabilityFilter_colors"
                        class="ml-4 bg-white px-4 py-2 rounded-xl shadow text-gray-700 appearance-none" style="padding-right: 3rem;"
                    > 
                        <option value="all" >All Availability</option>
                        <option value="available" >Available</option>
                        <option value="unavailable" >Unavailable</option>
                    </select>
                    <!-- Custom arrow -->
                    <div style="pointer-events: none; position: absolute; top: 0; bottom: 0; right: 0.5rem; display: flex; align-items: center;">
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                </div>
            </div>

            <!-- COLORS GRID -->
            <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-4 gap-6 mt-6">
                {# Loop #}
                {% for color in colors %}
                <div class="bg-white rounded-2xl shadow overflow-hidden flex flex-col color-card_colors"
                        data-name_colors="{{ color.name|lower }}"
                        data-availability_colors="{{ color.availability ? 'available' : 'unavailable' }}"
                        data-price_colors="{{ color.price }}"
                        data-type_colors="{{ color.imagePath ? 'image' : 'hex' }}"
                        data-hex_colors="{{ color.colorHex|lower }}"
                >
                    <div class="relative h-48 w-full">
                        <!-- Badge -->
                        {% if color.availability %}
                            <span class="absolute top-4 right-4 bg-[rgb(251,165,3)] text-black text-sm font-semibold px-2 py-1 rounded-md shadow-md">Available</span>
                        {% else %}
                            <span class="absolute top-4 right-4 bg-gray-400 text-white text-sm font-semibold px-2 py-1 rounded-md shadow-md">Unavailable</span>
                        {% endif %}

                        <!-- Image -->
                        {% if color.imagePath %}
                        <img
                            src="{{ asset(color.imagePath) }}"
                            alt="{{ color.name }}"
                            class="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
                        >
                        {% elseif color.getColorHex() %}
                        <div
                            class="w-full h-full transition-all duration-300 hover:brightness-95 rounded-lg"
                            style="background-color: {{ color.getColorHex() }};"
                            title="{{ color.name }}"
                        ></div>
                        {% else %}
                        <img
                            src="{{ asset('uploads/placeholder.jpeg') }}"
                            alt="No image"
                            class="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
                        >
                        {% endif %}
                    </div>
                    <!-- Card Body -->
                    <div class="p-4 flex flex-col flex-1">
                        <div class="flex flex-col space-y-3">
                            <div class="space-y-6">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <h3 class="text-lg font-semibold">{{ color.name }}</h3>
                                    </div>
                                    <div>
                                        <p class="text-sky-600 font-bold text-lg mt-1">â‚±{{ color.price|number_format(2, '.', ',') }}</p>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Footer Controls -->
                        <div class="flex gap-2 pt-6 justify-end">
                            <!-- EDIT COLOR BUTTON -->
                            <button
                                type="button"
                                class="editColorBtn border border-gray-400 px-2 py-2 rounded-xl font-medium flex items-center gap-2 text-black
                                    bg-[#f5ede5] hover:bg-[rgb(251,165,3)] transition-colors"
                                data-color-id="{{ color.id }}"
                                data-color-name="{{ color.name }}"
                                data-color-price="{{ color.price }}"
                                data-color-type="{{ color.imagePath ? 'image' : 'hex' }}"
                                data-color-value="{{ color.imagePath ? asset(color.imagePath) : color.colorHex }}"
                                data-color-available="{{ color.availability ? '1' : '0' }}"
                            >
                                <img src="{{ asset('images/admin/edit.svg') }}" alt="Edit Icon" class="w-4 h-4">
                            </button>



                            <!-- DELETE BUTTON -->
                            <button
                                type="button"
                                class="deleteColorBtn border border-gray-400 px-2 py-2 rounded-xl font-medium flex items-center gap-2 text-black
                                    bg-[#f5ede5] hover:bg-[rgb(251,165,3)] transition-colors"
                                data-delete-url="{{ path('management_delete_color', { id: color.id }) }}"
                                data-color-name="{{ color.name }}"
                            >
                                <img src="{{ asset('images/admin/trash 2.svg') }}" alt="Trash Icon" class="w-4 h-4">
                            </button>
                        </div>
                    </div>
                </div>
                {% else %}
                    <p class="text-gray-500">No colors found.</p>
                {% endfor %}
            </div>
        </main>
    </div>
</div> <!-- NABILIN NA CLOSE FOR LEFT SIDEBAR -->
{% endblock %}