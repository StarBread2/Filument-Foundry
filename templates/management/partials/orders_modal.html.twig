<!-- EDIT MODAL -->
<div>
    <div id="create-order-wrapper"
        data-csrf-create-order="{{ csrf_token('create_order') }}"
        data-csrf-update-order="{{ csrf_token('update_order') }}"
        data-csrf-update-status="{{ csrf_token('update_status') }}">
    </div>

    <!-- ORDER DETAILS MODAL -->
    <div 
        id="order-details-modal" 
        class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden"
    >
        <div 
            class="rounded-xl shadow-xl p-6 w-[650px] max-h-[90vh] overflow-y-auto"
            style="background-color: #FAF4EC;">

            <!-- HEADER -->
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold">
                    Order Details - ORD-001
                </h2>

                <button onclick="closeOrderDetails()" class="text-gray-600 hover:text-black text-xl">
                    &times;
                </button>
            </div>

            <!-- MAIN TWO-COLUMN SECTION -->
            <div class="grid grid-cols-2 gap-6">

                <!-- CUSTOMER INFORMATION -->
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">Customer Information</h3>

                    <p><span class="font-semibold">Name:</span> <span id="modal-customer-name"></span> </p>
                    <p><span class="font-semibold">Email:</span> <span id="modal-user-email"></span> </p>
                    <p><span class="font-semibold">Order Date:</span> <span id="modal-created-at"></span> </p>
                </div>

                <!-- PROJECT DETAILS -->
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">Project Details</h3>
                    {# PROJECT NAME #}
                    <p>
                        <span class="font-semibold">Project:</span> <span id="modal-project-name"></span> 
                    </p>

                    {# MATERIAL #}
                    <p>
                        <span class="font-semibold">Material:</span> <span id="modal-material"></span> 

                        <!-- Editable Select -->
                        <select id="edit-material" 
                            class="hidden mt-1 w-full rounded-lg border border-gray-300"
                            style="padding: 0.3rem;"
                        >
                            {% for mat in materials %}
                                <option value="{{ mat.id }}">{{ mat.name }}</option>
                            {% endfor %}
                        </select>
                    </p>

                    {# COLOR #}
                    <p>
                        <span class="font-semibold">Color:</span> <span id="modal-color"></span> 

                        <select id="edit-color" class="hidden mt-1 w-full rounded-lg border border-gray-300" style="padding: 0.3rem;">
                            {% for col in colors %}
                                <option value="{{ col.id }}">{{ col.name }}</option>
                            {% endfor %}
                        </select>
                    </p>

                    {# Finish #}
                    <p>
                        <span class="font-semibold">Finish:</span> <span id="modal-finish"></span> 

                        <select id="edit-finish" class="hidden mt-1 w-full rounded-lg border border-gray-300" style="padding: 0.3rem;">
                            {% for fin in finishes %}
                                <option value="{{ fin.id }}">{{ fin.name }}</option>
                            {% endfor %}
                        </select>
                    </p>

                    {# Quantity #}
                    <p>
                        <span class="font-semibold">Quantity:</span> <span id="modal-quantity"></span> 

                        <input id="edit-quantity" type="number" class="hidden mt-1 w-full rounded-lg border border-gray-300" min="1" style="padding: 0.3rem;">
                    </p>

                    {# Model Multiplier #}
                    <p>
                        <span class="font-semibold">Model Multiplier:</span> <span id="modal-model-multiplier"></span> 

                        <input id="edit-model-multiplier" type="number" step="0.01" class="hidden mt-1 w-full rounded-lg border border-gray-300" style="padding: 0.3rem;">
                    </p>

                    {# Total #}
                    <p>
                        <span class="font-semibold">Total:</span> <span id="modal-total"></span> 
                    </p>

                    <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                        <button 
                            id="edit-project-btn"
                            class="px-4 py-2 rounded-lg bg-black text-white text-sm"
                        >
                            Edit Project Details
                        </button>

                        <button 
                            class="px-4 py-2 rounded-lg bg-black text-white text-sm"
                        >
                            View 3D Model
                        </button>
                    </div>
                    
                </div>
            </div>

            <!-- NOTES -->
            <div class="mt-4">
                <h3 class="font-semibold mb-2">Notes</h3>
                <p class="text-gray-700" id="modal-notes">
                    Test note
                </p>
            </div>

            <hr class="my-4">

            <!-- DELIVERY & TRACKING -->
            <h3 class="font-semibold mb-1 mt-3">Delivery</h3>
            <div class="grid grid-cols-2 gap-4">
                <!-- DELIVERY DATE -->
                <div>
                    <label class="text-sm font-semibold">Delivery Date</label>
                    <input 
                        type="datetime-local"
                        id="delivery-date"
                        class="w-full mt-1 rounded-lg border border-gray-300 bg-white"
                        style="padding: 0.5rem;"
                    >
                </div>

                <!-- DELIVERY LOCATION -->
                <div>
                    <label class="text-sm font-semibold">Delivery Location</label>
                    <input 
                        type="text"
                        id="delivery-location"
                        placeholder="City, Province, Country"
                        class="w-full mt-1 rounded-lg border border-gray-300 bg-white"
                        style="padding: 0.5rem;"
                        disabled
                    >
                </div>

                {# arrival date #}
                <div>
                    <label class="text-sm font-semibold">Arrival Date</label>
                    <input 
                        type="datetime-local"
                        id="arrival-date"
                        class="w-full mt-1 rounded-lg border border-gray-300 bg-white"
                        style="padding: 0.5rem;"
                    >
                </div>
            </div>

            <!-- BUTTONS -->
            <div class="flex justify-end gap-3 mt-6">
                <button 
                    onclick="closeOrderDetails()"
                    class="px-4 py-2 rounded-lg bg-white border"
                >
                    Cancel
                </button>

                <button 
                    id="save-order-btn" 
                    class="px-4 py-2 rounded-lg bg-black text-white"
                >
                    Update Order Info
                </button>
            </div>
        </div>
    </div>
</div>
<!-- EDIT STATUS CONFRIMATION MODAL -->
<div 
    id="statusConfirmModal"
    class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden"
>
    <div class="bg-[#fdf5ef] rounded-xl shadow-lg p-6 w-full max-w-sm text-center relative">
        <button 
            id="closeStatusModal"
            class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-xl font-bold">
            &times;
        </button>

        <h2 class="text-lg font-semibold mb-2">Confirm Update</h2>
        {# JS SIDE TEXT #}
        <p id="statusMessage" class="text-sm text-gray-600 mb-5"></p>

        <div class="flex justify-center gap-3">
            <button 
                id="cancelStatusBtn"
                class="px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-100">
                Cancel
            </button>

            <button 
                id="confirmStatusBtn"
                class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
                Confirm
            </button>
        </div>
    </div>
</div>

<!-- CREATE MODAL -->
<div 
    id="modal_add" 
    class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden"
>
    <div class="bg-[#fdf5ef] rounded-xl shadow-lg p-6 relative" style="width: 60%;">

        <!-- Close -->
        <button 
            id="closeEditModalBtn_add" 
            class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-xl font-bold">
            &times;
        </button>

        <h2 class="text-xl font-semibold mb-1">Edit User</h2>
        <p class="text-sm text-gray-600 mb-4">Update this user's information</p>

        <form>
            <!-- GRID LAYOUT -->
            <div class="grid grid-cols-2 gap-6">

                <!-- LEFT COLUMN -->
                <div class="space-y-4">

                    <!-- CUSTOMER DETAILS -->
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-2">Customer Details</h3>

                        <label class="block text-sm font-medium mb-1">Customer Email*</label>
                        <select id="customer-select" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            <option value="">-- Select a customer --</option>
                            {% for user in users %}
                                <option 
                                    value="{{ user.id }}" 
                                    data-fullname="{{ user.fullName }}"
                                    data-address="{{ user.address }}"
                                >
                                    {{ user.email }}
                                </option>
                            {% endfor %}
                        </select>

                        <label class="block text-sm font-medium mb-1">Customer Name</label>
                        <input id="customer-name" type="text" disabled
                            class="w-full border border-gray-300 rounded-md px-3 py-2">

                        <label class="block text-sm font-medium mb-1">Delivery Location*</label>
                        <input type="text" id="delivery-location_add" required 
                            class="w-full border border-gray-300 rounded-md px-3 py-2">
                    </div>

                    <hr>

                    <!-- PRINT DETAILS -->
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-2">Print Details</h3>

                        <label class="block text-sm font-medium mb-1">Material*</label>
                        <select name="material" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            {% for mat in materials %}
                                <option value="{{ mat.id }}">{{ mat.name }}</option>
                            {% endfor %}
                        </select>

                        <label class="block text-sm font-medium mb-1">Finish*</label>
                        <select name="finish" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            {% for fin in finishes %}
                                <option value="{{ fin.id }}">{{ fin.name }}</option>
                            {% endfor %}
                        </select>

                        <label class="block text-sm font-medium mb-1">Color*</label>
                        <select name="color" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            {% for col in colors %}
                                <option value="{{ col.id }}">{{ col.name }}</option>
                            {% endfor %}
                        </select>

                        <label class="block text-sm font-medium mb-1">3D Model*</label>
                        <input name="filePath" type="text" required
                            class="w-full border border-gray-300 rounded-md px-3 py-2">
                    </div>

                </div>

                <!-- RIGHT COLUMN -->
                <div class="space-y-4">

                    <!-- ORDER DETAILS -->
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-2">Order Details</h3>

                        <label class="block text-sm font-medium mb-1">Quantity*</label>
                        <input type="number" min="1" required
                            class="w-full border border-gray-300 rounded-md px-3 py-2">

                        <label class="block text-sm font-medium mb-1">Model Multiplier</label>
                        <input name="modelMultiplier" type="number" step="any"
                            class="w-full border border-gray-300 rounded-md px-3 py-2">

                        <label class="block text-sm font-medium">Delivery Date</label>
                        <input name="deliveryDate" type="datetime-local"
                            class="w-full border border-gray-300 rounded-md px-3 py-2">

                        <label class="block text-sm font-medium">Arrival Date</label>
                        <input name="arrivalDate" type="datetime-local"
                            class="w-full border border-gray-300 rounded-md px-3 py-2">
                    </div>

                    <!-- NOTES (FULL WIDTH 2 COLUMNS) -->
                    <div >
                        <label class="block text-sm font-medium mb-1">Notes</label>
                        <input type="text" name="notes_add"
                            class="w-full border border-gray-300 rounded-md px-3 py-2">
                    </div>
                </div>
            </div>

            <!-- BUTTONS (full width container, align right) -->
            <div class="flex justify-end space-x-3 mt-6">
                <button 
                    type="button" 
                    id="cancelCreateBtn_add"
                    class="px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-100">
                    Cancel
                </button>

                <button 
                    type="submit"
                    class="px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800">
                    Save Changes
                </button>
            </div>
        </form>
    </div>
</div>

<!-- DELETE CONFIRMATION MODAL -->
<div 
    id="deleteOrderModal"
    class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden"
>
    <div class="bg-[#fdf5ef] rounded-xl shadow-lg p-6 w-full max-w-sm text-center relative">
        <button 
            id="closeDeleteModal"
            class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-xl font-bold">
            &times;
        </button>

        <h2 class="text-lg font-semibold mb-2">Confirm Deletion</h2>
        <p id="deleteMessage" class="text-sm text-gray-600 mb-5">
            Are you sure you want to delete this order?
        </p>

        <!-- Hidden -->
        <input type="hidden" id="deleteOrderId">
        <input type="hidden" id="csrfDelete" value="{{ csrf_token('delete_order') }}">

        <div class="flex justify-center gap-3">
            <button 
                id="cancelDeleteBtn"
                class="px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-100">
                Cancel
            </button>
            
            <button 
                id="confirmDeleteBtn"
                class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
                Delete
            </button>
        </div>
    </div>
</div>



